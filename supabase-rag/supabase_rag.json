{
  "name": "supabase-rag",
  "nodes": [
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.1,
      "position": [
        -40,
        280
      ],
      "id": "ad4cdce0-5ae0-423b-aabe-e6364a158fa6",
      "name": "When chat message received",
      "webhookId": "679e356b-fcc3-4abc-ab59-8ca4ce2cc616"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4o-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        20,
        500
      ],
      "id": "c6592055-f6a3-45de-8881-5819c8531a79",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "1NYcjHdurohDfhOk",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.memoryPostgresChat",
      "typeVersion": 1.3,
      "position": [
        180,
        500
      ],
      "id": "54970a63-30dc-4f58-aa7c-524ffd1cab5d",
      "name": "Postgres Chat Memory",
      "credentials": {
        "postgres": {
          "id": "oMkMhJkoofVow0Xq",
          "name": "Postgres account"
        }
      }
    },
    {
      "parameters": {
        "mode": "retrieve-as-tool",
        "toolName": "aws_knowledge_base",
        "toolDescription": "Extracting chunks",
        "tableName": {
          "__rl": true,
          "value": "documents",
          "mode": "list",
          "cachedResultName": "documents"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStoreSupabase",
      "typeVersion": 1,
      "position": [
        420,
        440
      ],
      "id": "e4d4ddb6-3c17-4b06-a9e7-6736ce00c9ae",
      "name": "Supabase Vector Store",
      "credentials": {
        "supabaseApi": {
          "id": "VFDjQpUEJTwaf3RX",
          "name": "Supabase account"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        200,
        1140
      ],
      "id": "b502b4a7-a6ee-4b60-a295-bb2534b963b5",
      "name": "Embeddings OpenAI",
      "credentials": {
        "openAiApi": {
          "id": "1NYcjHdurohDfhOk",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "dataType": "binary",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "typeVersion": 1,
      "position": [
        400,
        1140
      ],
      "id": "7cb65b09-6e3b-49cc-a274-5a8bbd44089c",
      "name": "Default Data Loader"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.textSplitterRecursiveCharacterTextSplitter",
      "typeVersion": 1,
      "position": [
        500,
        1360
      ],
      "id": "43b8481e-51c0-44ef-b2a6-403e72569687",
      "name": "Recursive Character Text Splitter"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        -200,
        920
      ],
      "id": "a00c158d-c649-448d-9bc0-1c6b9177c892",
      "name": "When clicking ‘Test workflow’"
    },
    {
      "parameters": {
        "mode": "insert",
        "tableName": {
          "__rl": true,
          "value": "documents",
          "mode": "list",
          "cachedResultName": "documents"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStoreSupabase",
      "typeVersion": 1,
      "position": [
        260,
        920
      ],
      "id": "09a850d7-dc95-45ed-a128-5290de1d9ccf",
      "name": "Add to Supabase",
      "credentials": {
        "supabaseApi": {
          "id": "VFDjQpUEJTwaf3RX",
          "name": "Supabase account"
        }
      }
    },
    {
      "parameters": {
        "operation": "download",
        "fileId": {
          "__rl": true,
          "value": "1dG8aTu5K1rKYsQluGKeU6lRd0nShf3Ro",
          "mode": "list",
          "cachedResultName": "aws-guide.pdf",
          "cachedResultUrl": "https://drive.google.com/file/d/1dG8aTu5K1rKYsQluGKeU6lRd0nShf3Ro/view?usp=drivesdk"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        40,
        920
      ],
      "id": "6ea16338-c04d-4319-b71c-3b1c5ef289a0",
      "name": "Download File",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "AUjtKHc2F1uuH8VS",
          "name": "Taha Google-Drive"
        }
      }
    },
    {
      "parameters": {
        "options": {
          "systemMessage": "You are a helpful assistant"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.7,
      "position": [
        180,
        280
      ],
      "id": "566a9ad5-0651-4cd1-abb4-4c9538b19f85",
      "name": "RAG Agent"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        380,
        660
      ],
      "id": "d0abeb14-fed3-4b42-9213-76d9b41b6cde",
      "name": "Embeddings",
      "credentials": {
        "openAiApi": {
          "id": "1NYcjHdurohDfhOk",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "content": "# Loading Binary Data from Google Drive",
        "height": 760,
        "width": 1140
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -340,
        800
      ],
      "typeVersion": 1,
      "id": "ecdce4aa-0074-4563-bad2-2907baeb2519",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "content": "# RAG Agent with Memory\n",
        "height": 660,
        "width": 1140,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -340,
        140
      ],
      "typeVersion": 1,
      "id": "4d5baa9e-0a67-425b-80e2-5a6aa5b75a5a",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "content": "# Source: Nate Herk | AI Automation\nYouTube link: https://www.youtube.com/watch?v=JjBofKJnYIU",
        "height": 100,
        "width": 760,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        0,
        0
      ],
      "typeVersion": 1,
      "id": "e64a9352-8c07-4789-8146-659ad613ba3b",
      "name": "Sticky Note2"
    }
  ],
  "pinData": {},
  "connections": {
    "When chat message received": {
      "main": [
        [
          {
            "node": "RAG Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "RAG Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Postgres Chat Memory": {
      "ai_memory": [
        [
          {
            "node": "RAG Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Supabase Vector Store": {
      "ai_tool": [
        [
          {
            "node": "RAG Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI": {
      "ai_embedding": [
        [
          {
            "node": "Add to Supabase",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Default Data Loader": {
      "ai_document": [
        [
          {
            "node": "Add to Supabase",
            "type": "ai_document",
            "index": 0
          }
        ]
      ]
    },
    "Recursive Character Text Splitter": {
      "ai_textSplitter": [
        [
          {
            "node": "Default Data Loader",
            "type": "ai_textSplitter",
            "index": 0
          }
        ]
      ]
    },
    "When clicking ‘Test workflow’": {
      "main": [
        [
          {
            "node": "Download File",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Download File": {
      "main": [
        [
          {
            "node": "Add to Supabase",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings": {
      "ai_embedding": [
        [
          {
            "node": "Supabase Vector Store",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "8080d30b-94e0-44e8-af09-4ca7dbc24307",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "1725aaf255f271a2cb370b9051de0a61864aaf0b262c35ad3f624929f92bfcff"
  },
  "id": "2BVG42CGboH8IXvD",
  "tags": []
}